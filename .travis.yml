sudo: false
language: cpp
compiler:
      - gcc

install:
    - if [ "$CXX" = "g++" ]; then export CXX="g++-4.8" CC="gcc-4.8"; fi

addons:
  apt:
    sources:
        - ubuntu-toolchain-r-test
    packages:
        - gcc-4.8
        - g++-4.8

before_install:
    - pip install --user urllib3[secure]
    - pip install --user cpp-coveralls

script:
    - ./bootstrap
    - cd build
    - cmake --version
    - cmake -DCMAKE_BUILD_TYPE=RELEASE ..
    - make
    - make check

after_success:
    - coveralls --root .. -E ".*external.*" -E ".*CMakeFiles.*" -E ".*test/.*.cpp.*"

notifications:
    email: false

