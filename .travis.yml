sudo: false

language: generic

matrix:
  include:
    - os: linux
      compiler: gcc
      env: COMPILER=g++-4.8 CXX=g++-4.8 GCOV=gcov-4.8

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - g++-4.8
      - python-pip

before_install:
    - pip install --user urllib3[secure]
    - pip install --user cpp-coveralls

script:
    - ./bootstrap
    - cd build
    - cmake --version
    - cmake -DCMAKE_BUILD_TYPE=RELEASE ..
    - make
    - make check
    - g++-4.8 --version
    - gcov-4.8 --version
    - which gcov

after_success:
    - coveralls --root .. -E ".*external.*" -E ".*CMakeFiles.*" -E ".*test/.*.cpp.*"

notifications:
    email: false

